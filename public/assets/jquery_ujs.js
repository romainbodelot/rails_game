!function(s,d){var u;s.rails!==d&&s.error("jquery-ujs has already been loaded!");var e=s(document);s.rails=u={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var t=s('meta[name="csrf-token"]').attr("content");t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){var e=s("meta[name=csrf-token]").attr("content"),t=s("meta[name=csrf-param]").attr("content");s('form input[name="'+t+'"]').val(e)},fire:function(e,t,a){var n=s.Event(t);return e.trigger(n,a),!1!==n.result},confirm:function(e){return confirm(e)},ajax:function(e){return s.ajax(e)},href:function(e){return e[0].href},handleRemote:function(n){var e,t,a,r,i,o;if(u.fire(n,"ajax:before")){if(r=n.data("with-credentials")||null,i=n.data("type")||s.ajaxSettings&&s.ajaxSettings.dataType,n.is("form")){e=n.attr("method"),t=n.attr("action"),a=n.serializeArray();var l=n.data("ujs:submit-button");l&&(a.push(l),n.data("ujs:submit-button",null))}else n.is(u.inputChangeSelector)?(e=n.data("method"),t=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):n.is(u.buttonClickSelector)?(e=n.data("method")||"get",t=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(e=n.data("method"),t=u.href(n),a=n.data("params")||null);return o={type:e||"GET",data:a,dataType:i,beforeSend:function(e,t){if(t.dataType===d&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!u.fire(n,"ajax:beforeSend",[e,t]))return!1;n.trigger("ajax:send",e)},success:function(e,t,a){n.trigger("ajax:success",[e,t,a])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,a){n.trigger("ajax:error",[e,t,a])},crossDomain:u.isCrossDomain(t)},r&&(o.xhrFields={withCredentials:r}),t&&(o.url=t),u.ajax(o)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var a=document.createElement("a");try{return a.href=e,a.href=a.href,!((!a.protocol||":"===a.protocol)&&!a.host||t.protocol+"//"+t.host==a.protocol+"//"+a.host)}catch(n){return!0}},handleMethod:function(e){var t=u.href(e),a=e.data("method"),n=e.attr("target"),r=s("meta[name=csrf-token]").attr("content"),i=s("meta[name=csrf-param]").attr("content"),o=s('<form method="post" action="'+t+'"></form>'),l='<input name="_method" value="'+a+'" type="hidden" />';i===d||r===d||u.isCrossDomain(t)||(l+='<input name="'+i+'" value="'+r+'" type="hidden" />'),n&&o.attr("target",n),o.hide().append(l).appendTo("body"),o.submit()},formElements:function(e,t){return e.is("form")?s(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){u.formElements(e,u.disableSelector).each(function(){u.disableFormElement(s(this))})},disableFormElement:function(e){var t,a;t=e.is("button")?"html":"val",a=e.data("disable-with"),e.data("ujs:enable-with",e[t]()),a!==d&&e[t](a),e.prop("disabled",!0)},enableFormElements:function(e){u.formElements(e,u.enableSelector).each(function(){u.enableFormElement(s(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,a=e.data("confirm"),n=!1;return!a||(u.fire(e,"confirm")&&(n=u.confirm(a),t=u.fire(e,"confirm:complete",[n])),n&&t)},blankInputs:function(e,t,a){var n,r=s(),i=t||"input,textarea",o=e.find(i);return o.each(function(){if(n=s(this),!(n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):n.val())==!a){if(n.is("input[type=radio]")&&o.filter('input[type=radio]:checked[name="'+n.attr("name")+'"]').length)return!0;r=r.add(n)}}),!!r.length&&r},nonBlankInputs:function(e,t){return u.blankInputs(e,t,!0)},stopEverything:function(e){return s(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");e.data("ujs:enable-with",e.html()),t!==d&&e.html(t),e.bind("click.railsDisable",function(e){return u.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==d&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},u.fire(e,"rails:attachBindings")&&(s.ajaxPrefilter(function(e,t,a){e.crossDomain||u.CSRFProtection(a)}),e.delegate(u.linkDisableSelector,"ajax:complete",function(){u.enableElement(s(this))}),e.delegate(u.buttonDisableSelector,"ajax:complete",function(){u.enableFormElement(s(this))}),e.delegate(u.linkClickSelector,"click.rails",function(e){var t=s(this),a=t.data("method"),n=t.data("params"),r=e.metaKey||e.ctrlKey;if(!u.allowAction(t))return u.stopEverything(e);if(!r&&t.is(u.linkDisableSelector)&&u.disableElement(t),t.data("remote")===d)return t.data("method")?(u.handleMethod(t),!1):void 0;if(r&&(!a||"GET"===a)&&!n)return!0;var i=u.handleRemote(t);return!1===i?u.enableElement(t):i.error(function(){u.enableElement(t)}),!1}),e.delegate(u.buttonClickSelector,"click.rails",function(e){var t=s(this);if(!u.allowAction(t))return u.stopEverything(e);t.is(u.buttonDisableSelector)&&u.disableFormElement(t);var a=u.handleRemote(t);return!1===a?u.enableFormElement(t):a.error(function(){u.enableFormElement(t)}),!1}),e.delegate(u.inputChangeSelector,"change.rails",function(e){var t=s(this);return u.allowAction(t)?(u.handleRemote(t),!1):u.stopEverything(e)}),e.delegate(u.formSubmitSelector,"submit.rails",function(e){var t,a,n=s(this),r=n.data("remote")!==d;if(!u.allowAction(n))return u.stopEverything(e);if(n.attr("novalidate")==d&&(t=u.blankInputs(n,u.requiredInputSelector))&&u.fire(n,"ajax:aborted:required",[t]))return u.stopEverything(e);if(r){if(a=u.nonBlankInputs(n,u.fileInputSelector)){setTimeout(function(){u.disableFormElements(n)},13);var i=u.fire(n,"ajax:aborted:file",[a]);return i||setTimeout(function(){u.enableFormElements(n)},13),i}return u.handleRemote(n),!1}setTimeout(function(){u.disableFormElements(n)},13)}),e.delegate(u.formInputClickSelector,"click.rails",function(e){var t=s(this);if(!u.allowAction(t))return u.stopEverything(e);var a=t.attr("name"),n=a?{name:a,value:t.val()}:null;t.closest("form").data("ujs:submit-button",n)}),e.delegate(u.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&u.disableFormElements(s(this))}),e.delegate(u.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&u.enableFormElements(s(this))}),s(function(){u.refreshCSRFTokens()}))}(jQuery);